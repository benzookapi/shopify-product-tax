<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Auth</title>
  <script src="https://unpkg.com/@shopify/app-bridge"></script>
</head>
<body>
    <script>
        var AppBridge = window['app-bridge'];
        var createApp = AppBridge.createApp;
        var actions = AppBridge.actions;
        var ResourcePicker = actions.ResourcePicker;
        var TitleBar = actions.TitleBar;
        var Button = actions.Button;
        var Redirect = actions.Redirect;
        var Toast = actions.Toast;
        
        const apiKey = '<%= api_key %>';
        const shopOrigin = '<%= shop %>';

        const app = createApp({
            apiKey: apiKey,
            shopOrigin: shopOrigin
        });

        const productPicker = ResourcePicker.create(app, {
          resourceType: ResourcePicker.ResourceType.Product,
         });

        productPicker.subscribe(ResourcePicker.Action.SELECT, ({selection}) => {
          alert(JSON.stringify(selection));
        });

        productPicker.subscribe(ResourcePicker.Action.CANCEL, () => {
          alert('Canceled!');
        });

        productPicker.dispatch(ResourcePicker.Action.OPEN);



        const breadcrumb = Button.create(app, { label: 'My Breadcrumb' });

        breadcrumb.subscribe(Button.Action.CLICK, () => {
          app.dispatch(Redirect.toApp({ path: '/breadcrumb-link' }));
        });

        const titleBarOptions = {
          title: 'My new title',
          breadcrumbs: breadcrumb,
        };

        const myTitleBar = TitleBar.create(app, titleBarOptions);




        const toastNotice = Toast.create(app, {message: 'Product saved'});
        toastNotice.dispatch(Toast.Action.SHOW);

       
     </script>
</body>
</html>